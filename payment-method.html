<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Donations Dashboard - Payment Methods</title>
  <meta name="description" content="Manage available payment methods for checkout and internal payouts." />
  <meta name="robots" content="index, follow" />
  <meta name="theme-color" content="#15C5CE" />
  <link rel="canonical" href="https://example.org/dashboard/payment-methods" />

  <meta property="og:title" content="Donations Dashboard - Payment Methods" />
  <meta property="og:description" content="Manage payment methods for checkout and internal payouts." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://example.org/dashboard/payment-methods" />
  <meta property="og:image" content="https://example.org/assets/img/og-image.png" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Donations Dashboard - Payment Methods" />
  <meta name="twitter:description" content="Manage payment methods for checkout and internal payouts." />
  <meta name="twitter:image" content="https://example.org/assets/img/og-image.png" />

  <link rel="shortcut icon" href="assets/img/favicon.png" type="image/x-icon" />
  <link rel="preload" href="assets/fonts/Jost-Regular.ttf" as="font" type="font/ttf" crossorigin />

  <!-- Stylesheets -->
  <link rel="stylesheet" href="assets/css/normalize.css" />
  <link rel="stylesheet" href="assets/css/bootstrap.min.css" />
  <link rel="stylesheet" href="assets/css/owl.carousel.min.css" />
  <link rel="stylesheet" href="assets/css/all.min.css" />
  <link rel="stylesheet" href="assets/css/style.css" />
</head>

<body data-theme="light">
  <a class="skip-link" href="#main-content">Skip to main content</a>

  <div class="app">
    <aside class="sidebar" id="sidebar" aria-label="Primary navigation">
      <div class="sidebar__logo">
        <a class="sidebar__brand" href="index.html" aria-label="Donations dashboard home">
          <img src="assets/img/logo.svg" alt="Donations Dashboard logo" height="50" />
        </a>
      </div>

      <!-- Main navigation links -->
      <nav class="sidebar__nav" aria-label="Primary">
        <!-- Main sections -->
        <a class="sidebar__link " href="index.html" aria-current="page">
          <i class="fas fa-th-large sidebar__icon" aria-hidden="true"></i>
          <span class="sidebar__label">Overview</span>
        </a>

        <a class="sidebar__link" href="campaigns.html">
          <i class="fas fa-bullhorn sidebar__icon" aria-hidden="true"></i>
          <span class="sidebar__label">Campaigns</span>
        </a>

        <a class="sidebar__link" href="donations.html">
          <i class="fas fa-hand-holding-heart sidebar__icon" aria-hidden="true"></i>
          <span class="sidebar__label">Donations</span>
        </a>

        <a class="sidebar__link" href="donors.html">
          <i class="fas fa-users sidebar__icon" aria-hidden="true"></i>
          <span class="sidebar__label">Donors</span>
        </a>

        <a class="sidebar__link" href="manual-donation.html">
          <i class="fas fa-keyboard sidebar__icon" aria-hidden="true"></i>
          <span class="sidebar__label">Manual donations</span>
        </a>

        <a class="sidebar__link" href="countries.html">
          <i class="fa-regular fa-flag sidebar__icon" aria-hidden="true"></i>
          <span class="sidebar__label">Countries </span>
        </a>
        <a class="sidebar__link" href="city.html">
          <i class="fa-solid fa-city sidebar__icon" aria-hidden="true"></i>
          <span class="sidebar__label">Cities </span>
        </a>
        <a class="sidebar__link active" href="payment-method.html">
          <i class="fa-regular fa-credit-card sidebar__icon" aria-hidden="true"></i>
          <span class="sidebar__label">Payment Method </span>
        </a>

        <a class="sidebar__link" href="messages.html">
          <i class="fas fa-envelope sidebar__icon" aria-hidden="true"></i>
          <span class="sidebar__label">Messages</span>
        </a>

        <a class="sidebar__link" href="settings.html">
          <i class="fas fa-cog sidebar__icon" aria-hidden="true"></i>
          <span class="sidebar__label">Settings</span>
        </a>

        <!-- "More" expandable submenu (secondary sections) -->
        <li class="sidebar-item sidebar-item--expandable">
          <button class="sidebar-link sidebar-link--toggle" type="button" data-submenu="more-menu"
            aria-controls="more-menu" aria-expanded="false" aria-haspopup="true">
            <span class="d-flex align-items-center" style="gap: var(--space-3);">
              <i class="fa-solid fa-layer-group sidebar__icon" aria-hidden="true"></i>
              <span class="sidebar__label">More</span>
            </span>
            <i class="fa-solid fa-chevron-right submenu-caret" aria-hidden="true"></i>
          </button>

          <ul class="sidebar-submenu" id="more-menu" aria-hidden="true">
            <li>
              <a href="categories.html" class="sidebar-sublink">
                <i class="fa-solid fa-tags" aria-hidden="true"></i>
                <span>Categories</span>
              </a>
            </li>
            <li>
              <a href="team.html" class="sidebar-sublink">
                <i class="fa-solid fa-user-shield" aria-hidden="true"></i>
                <span>Team &amp; roles</span>
              </a>
            </li>
            <li>
              <a href="exports.html" class="sidebar-sublink">
                <i class="fa-solid fa-file-export" aria-hidden="true"></i>
                <span>Exports &amp; reports</span>
              </a>
            </li>
            <li>
              <a href="integrations.html" class="sidebar-sublink">
                <i class="fa-solid fa-plug" aria-hidden="true"></i>
                <span>Integrations</span>
              </a>
            </li>
            <li>
              <a href="access-audit.html" class="sidebar-sublink">
                <i class="fa-solid fa-clipboard-list" aria-hidden="true"></i>
                <span>Access audit</span>
              </a>
            </li>
            <li>
              <a href="system-alerts.html" class="sidebar-sublink">
                <i class="fa-solid fa-triangle-exclamation" aria-hidden="true"></i>
                <span>System alerts</span>
              </a>
            </li>
          </ul>
        </li>
      </nav>
    </aside>

    <div class="sidebar-overlay js-sidebar-overlay" aria-hidden="true"></div>

    <div class="app-main">
      <!-- Header -->
      <header class="app-header" aria-label="Dashboard header">
        <div class="app-header__left">
          <button class="icon-button js-sidebar-toggle" type="button" aria-label="Toggle sidebar"
            aria-controls="sidebar" aria-expanded="false">
            <i class="fas fa-bars" aria-hidden="true"></i>
          </button>
          <div class="app-header__titles">
            <p class="eyebrow">Dashboard</p>
            <h2 class="h4">Payment methods</h2>
          </div>
        </div>

        <div class="app-header__center">
          <form class="search" role="search" aria-label="Search dashboard">
            <label class="sr-only" for="dashboard-search">Search dashboard</label>
            <i class="fas fa-search" aria-hidden="true"></i>
            <input id="dashboard-search" type="search" name="q" placeholder="Search donors, campaigns, or messages"
              autocomplete="off" />
          </form>
        </div>

        <div class="app-header__right">
          <button class="icon-button js-theme-toggle" type="button" aria-label="Toggle theme">
            <i class="fas fa-sun" aria-hidden="true"></i>
          </button>

          <div class="dropdown-group dropdown-user">
            <button class="header-user js-dropdown-toggle js-user-menu-toggle" id="user-menu-toggle"
              data-dropdown-target="user-menu" type="button" aria-haspopup="true" aria-expanded="false"
              aria-controls="user-menu">
              <div class="avatar" aria-hidden="true">JL</div>
              <div class="user-details">
                <div class="user-name">Jordan Lee</div>
                <div class="user-email text-muted">jordan@donations.org</div>
              </div>
            </button>
            <div class="dropdown dropdown-user-menu" id="user-menu" data-dropdown-panel="user-menu" role="menu"
              aria-label="User menu">
              <div class="dropdown-header dropdown-user-header">
                <div class="dropdown-user-avatar avatar" aria-hidden="true">JL</div>
                <div class="dropdown-user-info">
                  <span class="dropdown-user-name">Jordan Lee</span>
                  <span class="dropdown-user-email">jordan@donations.org</span>
                </div>
              </div>
              <div class="dropdown-divider"></div>
              <a href="#" class="dropdown-item" role="menuitem">
                <i class="fa-regular fa-user" aria-hidden="true"></i>
                <span>Profile</span>
              </a>
              <div class="dropdown-divider"></div>
              <button type="button" class="dropdown-item dropdown-item-danger" role="menuitem">
                <i class="fa-solid fa-arrow-right-from-bracket" aria-hidden="true"></i>
                <span>Sign out</span>
              </button>
            </div>
          </div>
        </div>
      </header>

      <!-- Content -->
      <main class="app-content" id="main-content" tabindex="-1" data-page="payment-method">
        <section class="card page-header" aria-labelledby="pm-title">
          <div>
            <nav class="page-header__breadcrumb" aria-label="Breadcrumb">
              <ol>
                <li><a href="index.html">Dashboard</a></li>
                <li aria-current="page">Payment methods</li>
              </ol>
            </nav>
            <div class="page-header__title">
              <h1 id="pm-title" class="h3">Payment methods</h1>
              <p class="page-header__subtitle text-muted">Control which payment options appear in checkout and internal
                payouts.</p>
            </div>
          </div>

          <div class="page-header__actions">
            <a class="btn btn-primary" href="payment-method-new.html">
              <i class="fa-solid fa-plus" aria-hidden="true"></i>
              New method
            </a>
            <button class="icon-button" type="button" aria-label="Export payment methods">
              <i class="fa-solid fa-arrow-up-from-bracket" aria-hidden="true"></i>
            </button>
          </div>
        </section>

        <section class="card campaigns-toolbar flex-column" aria-label="Payment method filters">
          <div class="d-flex align-items-center justify-content-between w-100">
            <form class="search campaigns-search" role="search" aria-label="Search payment methods">
              <label class="sr-only" for="pm-search">Search payment methods</label>
              <i class="fas fa-search" aria-hidden="true"></i>
              <input id="pm-search" type="search" name="pm-search" placeholder="Search by name, provider, or type..." />
            </form>

            <div class="d-flex align-items-center gap-2">
              <div class="campaigns-toolbar__sort d-flex gap-2 align-items-center">
                <label class="sr-only" for="pmSort">Sort methods</label>
                <span class="text-muted">Sort:</span>
                <select id="pmSort" class="form-control form-control--sm js-table-sort" name="pmSort">
                  <option value="newest">Newest</option>
                  <option value="az">A → Z</option>
                  <option value="za">Z → A</option>
                </select>
              </div>
            </div>
          </div>
        </section>

        <!-- TABLE default -->
        <section class="payment-methods-view payment-methods-view--table is-active"
          aria-label="Payment methods table view">
          <div class="card table-card">
            <div class="table-responsive">
              <table class="table payment-methods-table" data-table>
                <thead>
                  <tr>
                    <th>Method</th>
                    <th>Provider</th>
                    <th>Type</th>
                    <th>Fees</th>
                    <th>Status</th>
                    <th>Created</th>
                    <th class="table-col-actions">Actions</th>
                  </tr>
                </thead>

                <tbody data-tbody>
                  <tr data-row data-search="credit card stripe card active 2.9% + 0.30">
                    <td data-label="Method">
                      <div class="campaigns-table__title">
                        <span class="campaign-name">Credit / Debit Card</span>
                        <span class="campaign-subtitle">Visa, Mastercard, AmEx</span>
                      </div>
                    </td>
                    <td data-label="Provider"><span class="text-muted">Stripe</span></td>
                    <td data-label="Type"><span class="badge badge--pill">Card</span></td>
                    <td data-label="Fees"><span class="text-muted">2.9% + $0.30</span></td>
                    <td data-label="Status"><span class="status-pill status-pill--active">Active</span></td>
                    <td data-label="Created"><span class="text-muted">2026-01-03</span></td>
                    <td class="table-col-actions" data-label="Actions">
                      <div class="table-actions">
                        <button type="button" class="btn btn-ghost btn-ghost--xs js-row-view"
                          aria-label="View Credit Card">
                          <i class="fa-regular fa-eye" aria-hidden="true"></i>
                        </button>
                        <a href="payment-method-new.html" class="btn btn-outline btn-outline--xs"
                          aria-label="Edit Credit Card">
                          <i class="fa-regular fa-pen-to-square" aria-hidden="true"></i>
                        </a>
                        <div class="dropdown dropdown-actions dropdown-actions--compact">
                          <button type="button" class="icon-button icon-button--sm js-actions-toggle"
                            aria-haspopup="true" aria-expanded="false" aria-label="More actions">
                            <i class="fa-solid fa-ellipsis-vertical" aria-hidden="true"></i>
                          </button>
                          <div class="dropdown-menu dropdown-menu--actions" role="menu">
                            <button type="button" class="dropdown-item js-row-toggle">
                              <i class="fa-regular fa-circle-check"></i>
                              <span>Toggle status</span>
                            </button>
                            <button type="button" class="dropdown-item dropdown-item--danger js-row-delete">
                              <i class="fa-solid fa-trash-can"></i>
                              <span>Delete</span>
                            </button>
                          </div>
                        </div>
                      </div>
                    </td>
                  </tr>

                  <tr data-row data-search="bank transfer iyzico bank inactive 0">
                    <td data-label="Method">
                      <div class="campaigns-table__title">
                        <span class="campaign-name">Bank Transfer</span>
                        <span class="campaign-subtitle">Manual confirmation</span>
                      </div>
                    </td>
                    <td data-label="Provider"><span class="text-muted">Iyzico</span></td>
                    <td data-label="Type"><span class="badge badge--pill">Bank</span></td>
                    <td data-label="Fees"><span class="text-muted">0%</span></td>
                    <td data-label="Status"><span class="status-pill status-pill--draft">Inactive</span></td>
                    <td data-label="Created"><span class="text-muted">2025-12-11</span></td>
                    <td class="table-col-actions" data-label="Actions">
                      <div class="table-actions">
                        <button type="button" class="btn btn-ghost btn-ghost--xs js-row-view"
                          aria-label="View Bank Transfer">
                          <i class="fa-regular fa-eye" aria-hidden="true"></i>
                        </button>
                        <a href="payment-method-new.html" class="btn btn-outline btn-outline--xs"
                          aria-label="Edit Bank Transfer">
                          <i class="fa-regular fa-pen-to-square" aria-hidden="true"></i>
                        </a>
                        <div class="dropdown dropdown-actions dropdown-actions--compact">
                          <button type="button" class="icon-button icon-button--sm js-actions-toggle"
                            aria-haspopup="true" aria-expanded="false" aria-label="More actions">
                            <i class="fa-solid fa-ellipsis-vertical" aria-hidden="true"></i>
                          </button>
                          <div class="dropdown-menu dropdown-menu--actions" role="menu">
                            <button type="button" class="dropdown-item js-row-toggle">
                              <i class="fa-regular fa-circle-check"></i>
                              <span>Toggle status</span>
                            </button>
                            <button type="button" class="dropdown-item dropdown-item--danger js-row-delete">
                              <i class="fa-solid fa-trash-can"></i>
                              <span>Delete</span>
                            </button>
                          </div>
                        </div>
                      </div>
                    </td>
                  </tr>

                  <tr data-row data-search="paypal paypal wallet active 3.4% + 0.30">
                    <td data-label="Method">
                      <div class="campaigns-table__title">
                        <span class="campaign-name">PayPal</span>
                        <span class="campaign-subtitle">Wallet checkout</span>
                      </div>
                    </td>
                    <td data-label="Provider"><span class="text-muted">PayPal</span></td>
                    <td data-label="Type"><span class="badge badge--pill">Wallet</span></td>
                    <td data-label="Fees"><span class="text-muted">3.4% + $0.30</span></td>
                    <td data-label="Status"><span class="status-pill status-pill--active">Active</span></td>
                    <td data-label="Created"><span class="text-muted">2025-10-22</span></td>
                    <td class="table-col-actions" data-label="Actions">
                      <div class="table-actions">
                        <button type="button" class="btn btn-ghost btn-ghost--xs js-row-view" aria-label="View PayPal">
                          <i class="fa-regular fa-eye" aria-hidden="true"></i>
                        </button>
                        <a href="payment-method-new.html" class="btn btn-outline btn-outline--xs"
                          aria-label="Edit PayPal">
                          <i class="fa-regular fa-pen-to-square" aria-hidden="true"></i>
                        </a>
                        <div class="dropdown dropdown-actions dropdown-actions--compact">
                          <button type="button" class="icon-button icon-button--sm js-actions-toggle"
                            aria-haspopup="true" aria-expanded="false" aria-label="More actions">
                            <i class="fa-solid fa-ellipsis-vertical" aria-hidden="true"></i>
                          </button>
                          <div class="dropdown-menu dropdown-menu--actions" role="menu">
                            <button type="button" class="dropdown-item js-row-toggle">
                              <i class="fa-regular fa-circle-check"></i>
                              <span>Toggle status</span>
                            </button>
                            <button type="button" class="dropdown-item dropdown-item--danger js-row-delete">
                              <i class="fa-solid fa-trash-can"></i>
                              <span>Delete</span>
                            </button>
                          </div>
                        </div>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>

            <!-- ✅ Pagination component (موحد) -->
            <div class="cs-pagination d-flex align-items-center justify-content-between flex-wrap gap-2" data-pagination
              aria-label="Table pagination">
              <div class="cs-pagination__meta text-muted" data-pagination-meta>
                Showing <span data-from>1</span>–<span data-to>10</span> of <span data-total>0</span>
              </div>

              <div class="cs-pagination__controls d-flex align-items-center" style="gap: var(--space-2);">
                <button type="button" class="btn btn-ghost btn-ghost--xs" data-page-prev aria-label="Previous page">
                  <i class="fa-solid fa-chevron-left" aria-hidden="true"></i>
                  Prev
                </button>

                <div class="d-flex align-items-center" style="gap: var(--space-2);">
                  <span class="text-muted">Page</span>
                  <select class="form-control form-control--sm" data-page-select aria-label="Select page"></select>
                  <span class="text-muted">of <strong data-page-total>1</strong></span>
                </div>

                <button type="button" class="btn btn-ghost btn-ghost--xs" data-page-next aria-label="Next page">
                  Next
                  <i class="fa-solid fa-chevron-right" aria-hidden="true"></i>
                </button>

                <select class="form-control form-control--sm" data-page-size aria-label="Rows per page">
                  <option value="5">5 / page</option>
                  <option value="10" selected>10 / page</option>
                  <option value="20">20 / page</option>
                  <option value="50">50 / page</option>
                </select>
              </div>
            </div>
          </div>
        </section>

        <!-- Loading -->
        <section class="card campaigns-loading is-hidden" aria-live="polite" data-loading>
          <div class="campaigns-loading__header">
            <h3 class="h4">Loading payment methods</h3>
            <p class="text-muted">Hang tight while we refresh the list.</p>
          </div>
          <div class="cs-skeleton cs-skeleton--table" aria-hidden="true">
            <div class="cs-skeleton__row"></div>
            <div class="cs-skeleton__row"></div>
            <div class="cs-skeleton__row"></div>
          </div>
        </section>

        <!-- No results -->
        <section class="card campaigns-empty is-hidden" aria-live="polite" data-no-results>
          <div class="campaigns-empty__icon" aria-hidden="true">
            <i class="fa-regular fa-folder-open"></i>
          </div>
          <h3 class="h4">No results</h3>
          <p class="text-muted">Try adjusting your search query.</p>
          <button type="button" class="btn btn-primary" data-reset-search>
            <i class="fa-solid fa-rotate-right" aria-hidden="true"></i>
            Reset search
          </button>
        </section>

        <!-- Empty state -->
        <section class="card campaigns-empty is-hidden" aria-live="polite" data-empty>
          <div class="campaigns-empty__icon" aria-hidden="true">
            <i class="fa-regular fa-folder-open"></i>
          </div>
          <h3 class="h4">No payment methods yet</h3>
          <p class="text-muted">Add your first payment option to appear in checkout.</p>
          <a class="btn btn-primary" href="payment-method-new.html">
            <i class="fa-solid fa-plus" aria-hidden="true"></i>
            Create your first method
          </a>
        </section>
      </main>

      <footer class="app-footer">
        <p class="text-muted">&copy; 2025 Donations Dashboard. All rights reserved.</p>
      </footer>
    </div>
  </div>

  <div class="cs-toast-container" aria-live="polite" aria-atomic="true"></div>

  <!-- JavaScript Files -->
  <script src="assets/js/jquery-3.7.1.min.js" defer></script>
  <script src="assets/js/owl.carousel.min.js" defer></script>
  <script src="assets/js/bootstrap.bundle.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/apexcharts" defer></script>
  <script src="assets/js/script.js" defer></script>

  <!-- Page JS: search + pagination -->
  <script defer>
    (function initPaymentMethodTable() {
      const page = document.querySelector('[data-page="payment-method"]');
      if (!page) return;

      const searchInput = page.querySelector('#pm-search');
      const sortSelect = page.querySelector('.js-table-sort');

      const tbody = page.querySelector('[data-tbody]');
      const allRows = Array.from(page.querySelectorAll('[data-row]'));

      const emptyState = page.querySelector('[data-empty]');
      const noResults = page.querySelector('[data-no-results]');
      const resetBtn = page.querySelector('[data-reset-search]');

      // Pagination refs
      const pager = page.querySelector('[data-pagination]');
      const metaFrom = pager?.querySelector('[data-from]');
      const metaTo = pager?.querySelector('[data-to]');
      const metaTotal = pager?.querySelector('[data-total]');
      const prevBtn = pager?.querySelector('[data-page-prev]');
      const nextBtn = pager?.querySelector('[data-page-next]');
      const pageSelect = pager?.querySelector('[data-page-select]');
      const pageTotal = pager?.querySelector('[data-page-total]');
      const pageSizeSelect = pager?.querySelector('[data-page-size]');

      let state = { q: '', sort: 'newest', page: 1, size: 10 };

      function norm(s) { return (s || '').toString().trim().toLowerCase(); }

      function applySearch(rows) {
        const q = norm(state.q);
        if (!q) return rows;
        return rows.filter(r => norm(r.getAttribute('data-search')).includes(q));
      }

      function applySort(rows) {
        const mode = state.sort;
        const clone = rows.slice();

        if (mode === 'az' || mode === 'za') {
          clone.sort((a, b) => {
            const an = norm(a.querySelector('.campaign-name')?.textContent);
            const bn = norm(b.querySelector('.campaign-name')?.textContent);
            return an.localeCompare(bn);
          });
          if (mode === 'za') clone.reverse();
          return clone;
        }

        return clone; // newest: keep DOM order
      }

      function paginate(rows) {
        const total = rows.length;
        const size = state.size;
        const pages = Math.max(1, Math.ceil(total / size));
        state.page = Math.min(state.page, pages);

        const start = (state.page - 1) * size;
        const end = start + size;

        return {
          total,
          pages,
          slice: rows.slice(start, end),
          from: total ? start + 1 : 0,
          to: Math.min(end, total)
        };
      }

      function renderPager({ total, pages, from, to }) {
        if (!pager) return;

        metaFrom.textContent = String(from);
        metaTo.textContent = String(to);
        metaTotal.textContent = String(total);
        pageTotal.textContent = String(pages);

        pageSelect.innerHTML = '';
        for (let i = 1; i <= pages; i++) {
          const opt = document.createElement('option');
          opt.value = String(i);
          opt.textContent = String(i);
          if (i === state.page) opt.selected = true;
          pageSelect.appendChild(opt);
        }

        prevBtn.disabled = state.page <= 1;
        nextBtn.disabled = state.page >= pages;

        pager.classList.toggle('is-hidden', total <= state.size);
      }

      function renderTable(rowsToShow) {
        tbody.innerHTML = '';
        rowsToShow.forEach(r => tbody.appendChild(r));

        const hasAny = allRows.length > 0;
        const hasShown = rowsToShow.length > 0;

        emptyState.classList.toggle('is-hidden', hasAny);
        noResults.classList.toggle('is-hidden', !hasAny || hasShown);

        if (!hasAny) pager?.classList.add('is-hidden');
      }

      function update() {
        let rows = applySearch(allRows);
        rows = applySort(rows);

        const pageData = paginate(rows);
        renderTable(pageData.slice);
        renderPager(pageData);
      }

      // Events
      searchInput?.addEventListener('input', (e) => {
        state.q = e.target.value || '';
        state.page = 1;
        update();
      });

      sortSelect?.addEventListener('change', (e) => {
        state.sort = e.target.value || 'newest';
        state.page = 1;
        update();
      });

      pageSizeSelect?.addEventListener('change', (e) => {
        state.size = parseInt(e.target.value, 10) || 10;
        state.page = 1;
        update();
      });

      pageSelect?.addEventListener('change', (e) => {
        state.page = parseInt(e.target.value, 10) || 1;
        update();
      });

      prevBtn?.addEventListener('click', () => {
        state.page = Math.max(1, state.page - 1);
        update();
      });

      nextBtn?.addEventListener('click', () => {
        state.page = state.page + 1;
        update();
      });

      resetBtn?.addEventListener('click', () => {
        if (searchInput) searchInput.value = '';
        state.q = '';
        state.page = 1;
        update();
      });

      // Init
      state.size = parseInt(pageSizeSelect?.value || '10', 10) || 10;
      state.sort = sortSelect?.value || 'newest';
      update();
    })();
  </script>
</body>

</html>